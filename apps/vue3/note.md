# 大文件上传

非阻塞上传：切一片就上传，减少用户等待的时间。
功能：

1. 大文件上传：切片

- 切片：文件file有一个slice、切片大小、唯一id、cpu的线程数

  唯一id（每一个文件的md5的计算）：后端拿到切片文件，对切片文件在进行md5计算，对比与前端的是否一样。防止在传输过程中被损坏。
  非常消耗内存，阻塞浏览器代码执行
  navigator.hardwareConcurrency 是一个浏览器 API 属性，用于返回当前设备的逻辑处理器核心数量（即 CPU 线程数）。这个值通常与设备的核心数相关，可用于优化多线程任务（如 Web Worker）的分配策略。
  启用的worker.ts脚本要保证，浏览器启用的是被编译后的js文件。还要注意url路径是否正确：vite与webpack处理时不一样的：待总结
  1. 计算切片数量
  2. 计算每个线程需要的切片数量
  3. 计算每个线程在切片列表中start、end的位置
  4. 每个线程启用一个web worker

2. 进度条、暂停
3. 上传了一部分，下次上传，这部分秒传
